# 01.05 - State Preset System

## Overview

The State Preset System enables any UI element to have different visual appearances based on interaction states (hover, active, focus, disabled). It leverages Studio1's existing preset system, treating states as preset variations that can be applied to any element type - buttons, cards, sections, or entire layouts.

## Architecture

### Core Concept
State presets ARE regular presets. Any preset can be used for any state on any element, enabling complete visual flexibility while maintaining the DRY principle.

### State Hierarchy
```
Default → Hover → Active → Active+Hover → Focus → Disabled
```

### Implementation Layers

1. **Data Attributes** (Current)
   - `data-active-preset`: Preset to use when active
   - `data-hover-preset`: Preset to use on hover
   - `data-active-when`: Condition for active state

2. **States Object** (Phase 2)
   ```json
   "states": {
     "hover": "button Ghost-hover",
     "active": "button primary",
     "active-hover": "button primary-hover",
     "focus": "button Ghost-focus",
     "disabled": "button disabled"
   }
   ```

3. **CSS Generation** (Phase 3)
   - Pure CSS output for exports
   - No JavaScript required for basic states

## Current Implementation

### UIGenerator Enhancement
The UIGenerator's `InteractiveButton` component tracks states and applies appropriate presets:

```javascript
// Determine which preset to use based on states
if (isHovered && element['data-hover-preset']) {
  modifiedElement.preset = element['data-hover-preset'];
} else if (isActive && element['data-active-preset']) {
  modifiedElement.preset = element['data-active-preset'];
}
```

### Usage Example
```json
{
  "preset": "button Ghost",
  "content": "Grid",
  "data-action": "toggles.grid",
  "data-active-when": "gridVisible",
  "data-active-preset": "button secondary",
  "data-hover-preset": "button Ghost-hover"
}
```

## State Preset Patterns

### Basic States
- **Default**: Base preset (e.g., "button Ghost")
- **Hover**: Slightly modified version (e.g., "button Ghost-hover")
- **Active**: Distinct appearance (e.g., "button primary")
- **Focus**: Accessibility indicator (e.g., "button Ghost-focus")

### Combination States
- **Active + Hover**: When toggled on AND hovering
- **Active + Focus**: When toggled on AND keyboard focused
- **Disabled + Hover**: Visual feedback even when disabled

## Future Implementation

### Phase 2: States Object
Replace individual data attributes with unified states object:
```json
{
  "preset": "card neutral",
  "states": {
    "hover": "card neutral-glow",
    "active": "card primary",
    "active-hover": "card primary-glow"
  }
}
```

### Phase 3: Theme Processor Integration
Generate pure CSS from state mappings:
```css
.ui.card.neutral { /* base styles */ }
.ui.card.neutral:hover { /* neutral-glow styles */ }
.ui.card.neutral.active { /* primary styles */ }
.ui.card.neutral.active:hover { /* primary-glow styles */ }
```

### Phase 4: Global State Defaults
Define default state behaviors at theme level:
```json
"stateDefaults": {
  "button": {
    "hover": "+hover",  // Append -hover to current preset
    "active": "primary",
    "focus": "+focus"
  }
}
```

### Phase 5: Visual Builder Integration
- State preview panel
- Visual state editing
- Live preview of all states
- Copy states between elements

## Benefits

1. **Universal Application** - Any preset works as a state
2. **Visual Clarity** - "button primary" vs CSS properties
3. **Reusability** - Define once, use everywhere
4. **Export Friendly** - Pure CSS output possible
5. **Designer Friendly** - Visual, not technical

## Design Principles

1. **States are Visual** - Think in presets, not properties
2. **Everything is Reusable** - Any preset, any state, any element
3. **Progressive Enhancement** - Works with CSS, better with JS
4. **Accessibility First** - Focus states are not optional

## Examples

### Button with Full States
```json
{
  "preset": "button Ghost",
  "content": "Save",
  "states": {
    "hover": "button Ghost-hover",
    "active": "button primary",
    "active-hover": "button primary-hover",
    "focus": "button Ghost-focus",
    "pressed": "button Ghost-pressed",
    "disabled": "button Ghost-disabled"
  }
}
```

### Card with Hover Glow
```json
{
  "preset": "card dark",
  "states": {
    "hover": "card dark-glow",
    "active": "card primary"
  }
}
```

### Navigation Link
```json
{
  "preset": "nav-link",
  "states": {
    "hover": "nav-link-hover",
    "active": "nav-link-active",
    "current": "nav-link-current"
  }
}
```

## Integration Points

### With Action System
States work seamlessly with actions:
- Actions trigger state changes
- States provide visual feedback
- Together enable rich interactions

### With Theme Processor
- Reads state mappings
- Generates appropriate CSS
- Handles state combinations

### With Visual Builder
- Preview states while designing
- Visual state assignment
- State inheritance display

---

**Note**: The State Preset System transforms static designs into rich, interactive experiences while maintaining Studio1's core principle: define visually, apply universally.